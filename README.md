# RPM-WPM
BigDuck
suá»™c cá»‘t
I2luY2x1ZGU8aW9zdHJlYW0+CiNpbmNsdWRlPFdpbmRvd3MuaD4KI2luY2x1ZGU8VGxIZWxwMzIuaD4KI2luY2x1ZGU8UHNhcGkuaD4KI2luY2x1ZGU8dmVjdG9yPgp1c2luZyBuYW1lc3BhY2Ugc3RkOwpIQU5ETEUgSFByb2NlcyA9IE5VTEw7CkRXT1JEIEdldFBpZEcoY29uc3QgY2hhciogbmFtZXByb2Nlc3MpCnsKCVBST0NFU1NfTUVNT1JZX0NPVU5URVJTIFByb2NNQzsKCVBST0NFU1NFTlRSWTMyIFBlMzI7CglIQU5ETEUgaFNuYXBzaG90ID0gTlVMTDsKCWhTbmFwc2hvdCA9IENyZWF0ZVRvb2xoZWxwMzJTbmFwc2hvdChUSDMyQ1NfU05BUFBST0NFU1MsIDApOwoJaWYgKGhTbmFwc2hvdCA9PSBJTlZBTElEX0hBTkRMRV9WQUxVRSkKCXsKCgkJcmV0dXJuIDA7CgoJfQoJZWxzZQoJewoJCVBlMzIuZHdTaXplID0gc2l6ZW9mKFBST0NFU1NFTlRSWTMyKTsKCQlIQU5ETEUgaFByb2Nlc3MgPSBOVUxMOwoJCXdoaWxlIChQcm9jZXNzMzJOZXh0KGhTbmFwc2hvdCwgJlBlMzIpKQoJCXsKCQkJaWYgKHN0cmNtcChQZTMyLnN6RXhlRmlsZSwgbmFtZXByb2Nlc3MpID09IDApCgkJCXsKCQkJCWhQcm9jZXNzID0gT3BlblByb2Nlc3MoUFJPQ0VTU19RVUVSWV9JTkZPUk1BVElPTiB8IFBST0NFU1NfVk1fUkVBRCwgRkFMU0UsIFBlMzIudGgzMlByb2Nlc3NJRCk7CgkJCQlpZiAoaFByb2Nlc3MgPT0gSU5WQUxJRF9IQU5ETEVfVkFMVUUpCgkJCQl7CgkJCQkJcmV0dXJuIDA7CgkJCQl9CgkJCQlHZXRQcm9jZXNzTWVtb3J5SW5mbyhoUHJvY2VzcywgJlByb2NNQywgc2l6ZW9mKFByb2NNQykpOwoJCQkJaWYgKFByb2NNQy5Xb3JraW5nU2V0U2l6ZSA+IDMwMDAwMDAwMCkKCQkJCXsKCQkJCQlyZXR1cm4gUGUzMi50aDMyUHJvY2Vzc0lEOwoJCQkJCUNsb3NlSGFuZGxlKGhTbmFwc2hvdCk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgoJCQkJfQoJCQl9CgkJfQoJCUNsb3NlSGFuZGxlKGhTbmFwc2hvdCk7Cgl9Cgp9CkRXT1JEIEdldE1vZHVsZUdhbWUoRFdPUkQgUElER2FtZSAsIGNvbnN0IGNoYXIqIFByb2NHYW1lKQp7CglNT0RVTEVFTlRSWTMyIE1vZDMyOwoJSEFORExFIGhNb2R1bGVTbmFwID0gTlVMTDsKCU1vZDMyLmR3U2l6ZSA9IHNpemVvZihNT0RVTEVFTlRSWTMyKTsKCWhNb2R1bGVTbmFwID0gQ3JlYXRlVG9vbGhlbHAzMlNuYXBzaG90KFRIMzJDU19TTkFQTU9EVUxFIHwgVEgzMkNTX1NOQVBNT0RVTEUzMiwgUElER2FtZSk7CgkvL2lmIChNb2R1bGUzMkZpcnN0KGhNb2R1bGVTbmFwLCAmTW9kMzIpKQoJLy97CgkvLwlpZiAoc3RyY21wKE1vZDMyLnN6TW9kdWxlLCBQcm9jR2FtZSkpCgkvLwl7CgkvLwkJQ2xvc2VIYW5kbGUoaE1vZHVsZVNuYXApOwoJLy8JCXJldHVybiBEV09SRChNb2QzMi5tb2RCYXNlQWRkcik7CgkvLwkJCgkvLwl9CgkvLwoJLy99Cgl3aGlsZSAoTW9kdWxlMzJOZXh0KGhNb2R1bGVTbmFwLCAmTW9kMzIpKQoJewoJCWNvdXQgPDwgIkZvdW5kOiAiIDw8IE1vZDMyLnN6TW9kdWxlIDw8IGVuZGw7CgkJaWYgKHN0cmNtcChNb2QzMi5zek1vZHVsZSwgUHJvY0dhbWUpPT0wKQoJCXsKCQkJY291dCA8PCAiRm91bmQ6ICIgPDwgTW9kMzIuc3pNb2R1bGUgPDwgIiBNb2RCYXNlOiAiIDw8IERXT1JEKE1vZDMyLm1vZEJhc2VBZGRyKSA8PCBlbmRsOwoJCQlDbG9zZUhhbmRsZShoTW9kdWxlU25hcCk7CgkJCXJldHVybiBEV09SRChNb2QzMi5tb2RCYXNlQWRkcik7CgkJCWJyZWFrOwoJCX0KCgl9CglzeXN0ZW0oInBhdXNlIik7CglyZXR1cm4gMDsKCUNsb3NlSGFuZGxlKGhNb2R1bGVTbmFwKTsKfQp2b2lkIEZhaWxlZEhhY2tpbmcoKQp7CglTbGVlcCgzMDAwKTsKCWV4aXQoMCk7Cn0KRFdPUkQgR2V0QmFzZUFkZHJlc3MoRFdPUkQgR2V0QmFzZUFkZHIpCnsKCURXT1JEIFZhdWxlUG9pbnRlciA9IDB4MDAwMjk1REM7CglEV09SRCBCYXNlQWRkcmVzc05lZWRPZmZzZXQgPSAxODA5OTgzNTQ0OwoJUmVhZFByb2Nlc3NNZW1vcnkoSFByb2NlcywgTFBWT0lEKEdldEJhc2VBZGRyICsgVmF1bGVQb2ludGVyKSwgJkJhc2VBZGRyZXNzTmVlZE9mZnNldCwgc2l6ZW9mKEJhc2VBZGRyZXNzTmVlZE9mZnNldCksIDApOwoJdmVjdG9yPERXT1JEPiBPZmZzZXR7IDB4MTFDLDB4MjBDLDB4MkMsMHg0LDB4NDAsMHhGQywgfTsKCWZvciAoaW50IGkgPSAwOyBpIDwgT2Zmc2V0LnNpemUoKTsgaSsrKQoJewoJCVJlYWRQcm9jZXNzTWVtb3J5KEhQcm9jZXMsIExQVk9JRChCYXNlQWRkcmVzc05lZWRPZmZzZXQgKyBPZmZzZXQuYXQoaSkpLCAmQmFzZUFkZHJlc3NOZWVkT2Zmc2V0LCBzaXplb2YoQmFzZUFkZHJlc3NOZWVkT2Zmc2V0KSwgMCk7Cgl9CglEV09SRCBPZmZzZXREYW4gPSAweEI5NDsKCURXT1JEIEFkZHJlc3NEYW4gPSBCYXNlQWRkcmVzc05lZWRPZmZzZXQgKyBPZmZzZXREYW47CglyZXR1cm4gQWRkcmVzc0RhbjsKfQppbnQgbWFpbigpCnsKCURXT1JEIFBJRCA9IEdldFBpZEcoImFvd19leGUuZXhlIik7CglpZiAoUElEID09IDApCgl7CgkJY291dCA8PCAiVGhhdCBCYWkgVHJvbmcgdmllYyB0aW0gS2llbSBQcm9jZXNzIEFvdyIgPDwgZW5kbDsKCQlGYWlsZWRIYWNraW5nKCk7Cgl9CgllbHNlCgl7CgkJY291dCA8PCAiVGltIFRoYXkgUHJvY2VzcyBBb3dfZXhlIHZvaSBQaWQgbGE6ICIgPDwgUElEIDw8IGVuZGw7CgkJRFdPUkQgR2V0QmFzZUFkZHIgPSBHZXRNb2R1bGVHYW1lKFBJRCwgImFvd19leGUuZXhlIik7CgkJaWYgKEdldEJhc2VBZGRyID09IDApCgkJewoJCQljb3V0IDw8ICJLaG9uZyBUaGUgVGltIER1b2MgQmFzZUFkZHJlc3MgQ3VhIE1vZHVsZSIgPDwgZW5kbDsKCQkJRmFpbGVkSGFja2luZygpOwoJCQkKCQl9CgkJZWxzZQoJCXsKCQkJY291dCA8PCAiVGltIFRoYXkgTW9kdWxlQmFzZUFkZHJlc3MgbGEgIiA8PCBHZXRCYXNlQWRkciA8PCBlbmRsOwoJCQlIUHJvY2VzID0gT3BlblByb2Nlc3MoUFJPQ0VTU19BTExfQUNDRVNTLCBGQUxTRSwgUElEKTsKCQkJaWYgKEhQcm9jZXMgPT0gSU5WQUxJRF9IQU5ETEVfVkFMVUUpCgkJCXsKCQkJCWNvdXQgPDwgImtob25nIHRoZSBUYW4gQ29uZyBWYW8gR2FtZSAhIiA8PCBlbmRsOwoJCQkJRmFpbGVkSGFja2luZygpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJYm9vbCB2Ymlwc2hvdyA9IGZhbHNlOwoJCQkJY291dCA8PCAiVGFuIENvbmcgdmFvIEdhbWUgVGhhbmggQ09uZyIgPDwgZW5kbDsKCQkJCURXT1JEIEFkZHJlc3NEYW5SZWFsID0gR2V0QmFzZUFkZHJlc3MoR2V0QmFzZUFkZHIpOwoJCQkJY291dCA8PCAiVGltIFRoYXkgQWRkcnNzRGFuIGxhOiAiIDw8IEFkZHJlc3NEYW5SZWFsIDw8IGVuZGw7CgkJCQlEV09SRCBTb0Rhbk5oYW5WYXQ7CgkJCQl3aGlsZSAodHJ1ZSkKCQkJCXsKCQkJCQlSZWFkUHJvY2Vzc01lbW9yeShIUHJvY2VzLCBMUFZPSUQoQWRkcmVzc0RhblJlYWwpLCAmU29EYW5OaGFuVmF0LCBzaXplb2YoU29EYW5OaGFuVmF0KSwgMCk7CgkJCQkJaWYgKCF2Ymlwc2hvdykKCQkJCQl7CgkJCQkJCWNvdXQgPDwgIlRpbSBUaGF5IFNvIERhbiBOaGFuIHZhdCBDbyBEdW9jIGxhOiAiIDw8IFNvRGFuTmhhblZhdCA8PCBlbmRsOwoJCQkJCX0KCQkJCQlpZiAoU29EYW5OaGFuVmF0IDwgNDApCgkJCQkJewoJCQkJCQlpbnQgdmF1bGV0b3dyaXRlID0gOTk5OTsKCQkJCQkJV3JpdGVQcm9jZXNzTWVtb3J5KEhQcm9jZXMsIExQVk9JRChBZGRyZXNzRGFuUmVhbCksICZ2YXVsZXRvd3JpdGUsIHNpemVvZih2YXVsZXRvd3JpdGUpLCAwKTsKCQkJCQkJY291dCA8PCAiVGhhbmggQ29uZyBHaGkgIiA8PCB2YXVsZXRvd3JpdGUgPDwgIiB2YW8gZGlhIGNoaSAiIDw8IEFkZHJlc3NEYW5SZWFsIDw8IGVuZGw7CgkJCQkJCXZiaXBzaG93ID0gdHJ1ZTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJdmJpcHNob3cgPSBmYWxzZTsKCQkJCQl9CgkJCQkJU2xlZXAoMTAwMCk7CgkJCQl9CgkJCQlzeXN0ZW0oInBhdXNlIik7CgkJCQkKCQkJfQoJCX0KCgl9Cn0=
ðŸ¤£ðŸ¤£
